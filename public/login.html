<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" type="text/css" href="/login.css">
	<link rel="stylesheet" type="text/css" href="/style.css">
  <script src="https://unpkg.com/htmx.org"></script>

	<title>Login</title>
</head>
<body>
	<form class="login-form" id="form" hx-post="/login" hx-target="#err-msg" hx-swap="innerHTML" >
		<h1 class="form-title">
			Login to Extreamly Secure Website
		</h1>
		<div class="form-item">
			<label>Username</label>		
			<input type="text" name="username" placeholder="..." />
		</div>

		<div class="form-item">
			<label>Passowrd</label>		
			<input type="password" name="password" placeholder="..." />
		</div>

		<input type="submit" id="action-btn" value="Login" />
		<div class="other-options">
			<!-- <a href="/forget-password"> Forget Password </a> -->
			<p> You don't have an account ? 
				<button 
					hx-get="/register" 
					hx-target="form"
					hx-swap="outerHTML"
					> 
					Register 
				</button> 
			</p>
		</div>
	<div id="err-msg" class="error-msg"></div>
	</form>

	<script>
		document.getElementById('form').addEventListener('htmx:beforeRequest', (event) => {
		    document.getElementById('action-btn').disabled = true;
		    document.getElementById('action-btn').style = "background-color: darkgray; border: none; color: white; cursor: none;"
		});

		document.getElementById('action-btn').addEventListener('htmx:afterRequest', (event) => {
		    event.target.disabled = false;
		});
	  // Trigger the initial load

  	// const responseDiv = document.getElementById("response")

  	// responseDiv.addEventListener('htmx:configRequest', (e) => {
  	// 	// const headers = e.detail.headers
  	// 	// headers.set('Content-Type', 'application/json')
  	// 	console.log(responseDiv)
  	// })

  	// responseDiv.addEventListener('htmx:confirm', (e) => {
  	// 	console.log(responseDiv)
  	// 	alert("beyene")	
  	// })

	</script>
</body>
</html>